<body class="g-sidenav-show bg-gray-100">
    <div class="min-height-300 bg-primary position-absolute w-100"></div>
    <aside
        class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 "
        id="sidenav-main">
        <app-sidebar></app-sidebar>
    </aside>
    <main class="main-content position-relative border-radius-lg ">
        <div class="container-fluid py-4">
            <div class="row">
                <div class="col-12">
                    <div class="card mb-4">
                        <div class="card-header pb-0">
                            <h1>Tambah Lot Lelang</h1>
                        </div>
                        <div class="container">
                            <form [formGroup]="Leladd" novalidate (ngSubmit)="add(lelform)" #lelform="ngForm">
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">Nama Lot Lelang</label>
                                    <input type="text" class="form-control" name="lelname" #lelname formControlName="lelname">
                                </div>
                                <div *ngIf="Leladd.controls['lelname'].invalid && Leladd.controls['lelname'].touched" class="alert alert-danger">
                                    <div *ngIf="Leladd.controls['lelname'].errors?.required">
                                   Lelang Name is required.
                                   </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">Nilai Limit</label>
                                            <input class="form-control" name="lelinitialprice" formControlName="lelinitialprice"
                                                #lelinitialprice currencyMask [options]="options">
                                        </div>
                                        <div *ngIf="Leladd.controls['lelinitialprice'].invalid && Leladd.controls['lelinitialprice'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelinitialprice'].errors?.required">
                                           Lelang Nilai Limit is required.
                                           </div>
                                           <div *ngIf="Leladd.controls['lelinitialprice'].errors?.['pattern']">
                                            Lelang Nilai Limit must be a valid value.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlSelect1">Cara Penawaran</label>
                                            <select class="form-control" name="lelbidtype" #lelbidtype formControlName="lelbidtype">
                                                <option value="" selected disabled>--SILAHKAN PILIH--</option>
                                                <option>Open Bidding</option>
                                                <option>Closed Bidding</option>
                                            </select>
                                        </div>
                                        <div *ngIf="Leladd.controls['lelbidtype'].invalid && Leladd.controls['lelbidtype'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelbidtype'].errors?.required">
                                           Lelang Bid Type is required.
                                           </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="exampleFormControlInput1">Nilai Jaminan</label>
                                            <input class="form-control" name="lelcolaqty" #lelcolaqty formControlName="lelcolaqty" currencyMask [options]="options">
                                        </div>
                                        <div *ngIf="Leladd.controls['lelcolaqty'].invalid && Leladd.controls['lelcolaqty'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelcolaqty'].errors?.required">
                                           Lelang Nilai Jaminan is required.
                                           </div>
                                           <div *ngIf="Leladd.controls['lelcolaqty'].errors?.['pattern']">
                                            Lelang Nilai Jaminan must be a valid value.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-datetime-local-input" class="form-control-label">Batas
                                                Akhir Jaminan</label>
                                            <input class="form-control" name="lelenddate" type="datetime-local" formControlName="lelenddate"
                                                #lelenddate>
                                        </div>
                                        <div *ngIf="Leladd.controls['lelenddate'].invalid && Leladd.controls['lelenddate'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelenddate'].errors?.required">
                                           Lelang Batas Akhir Jaminan is required.
                                           </div>
                                           <div *ngIf="Leladd.controls['lelenddate'].errors?.validateall">
                                            Lelang Batas Akhir Jaminan must be before Waktu Mulai Lelang dan Waktu Selesai Lelang
                                            </div>
                                            <div *ngIf="Leladd.controls['lelenddate'].errors?.validatedate">
                                                Lelang Batas Akhir Jaminan Lelang must be after current time.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-datetime-local-input" class="form-control-label">Waktu
                                                Mulai Lelang</label>
                                            <input class="form-control" name="bidStart" type="datetime-local" #bidStart formControlName="lelbidstart">
                                        </div>
                                        <div *ngIf="Leladd.controls['lelbidstart'].invalid && Leladd.controls['lelbidstart'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelbidstart'].errors?.required">
                                           Lelang Waktu Mulai is required.
                                           </div>
                                           <div *ngIf="Leladd.controls['lelbidstart'].errors?.validateall">
                                            Lelang Waktu Mulai Lelang must be before Waktu Selesai Lelang dan after Batas Akhir Jaminan
                                            </div>
                                            <div *ngIf="Leladd.controls['lelbidstart'].errors?.validatedate">
                                                Lelang Batas Akhir Jaminan Lelang must be after current time.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="example-date-input" class="form-control-label">Waktu Selesai Lelang</label>
                                            <input class="form-control" type="datetime-local" name="leljoinenddate" formControlName="leljoinenddate"
                                                #leljoinenddate>
                                        </div>
                                        <div *ngIf="Leladd.controls['leljoinenddate'].invalid && Leladd.controls['leljoinenddate'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['leljoinenddate'].errors?.required">
                                           Lelang Waktu Selesai Lelang is required.
                                           </div>
                                           <div *ngIf="Leladd.controls['leljoinenddate'].errors?.validateall">
                                            Lelang Waktu Selesai Lelang must be after Waktu Mulai Lelang dan Batas Akhir Jaminan
                                            </div>
                                            <div *ngIf="Leladd.controls['leljoinenddate'].errors?.validatedate">
                                                Lelang Batas Akhir Jaminan Lelang must be after current time.
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="exampleFormControlTextarea1">Uraian</label>
                                    <textarea class="form-control" rows="4" name="desc" #desc formControlName="desc"></textarea>
                                </div>
                                <div *ngIf="Leladd.controls['lelbidstart'].invalid && Leladd.controls['lelbidstart'].touched" class="alert alert-danger">
                                    <div *ngIf="Leladd.controls['lelbidstart'].errors?.required">
                                   Lelang Uraian is required.
                                   </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="exampleFormControlSelect1">Penyelenggara</label>
                                            <select class="form-control" #lelorg name="orgopt" formControlName="lelorg">
                                                <option value="" selected disabled (ngModel)="org_array">--SILAHKAN
                                                    PILIH--</option>
                                                <option *ngFor="let org of org_array" [ngValue]="org"
                                                    label="{{org.name}}">{{org.id}}</option>

                                            </select>
                                        </div>
                                        <div *ngIf="Leladd.controls['lelorg'].invalid && Leladd.controls['lelorg'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelorg'].errors?.required">
                                           Lelang Organizer is required.
                                           </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="exampleFormControlSelect1">Penjual</label>
                                            <select class="form-control" name="selleropt" #lelseller (change)="updateBranch()" formControlName="lelseller">
                                                <option value="" selected disabled (ngModel)="seller_array">--SILAHKAN
                                                    PILIH--</option>
                                                <option *ngFor="let seller of seller_array" [ngValue]="seller"
                                                    label="{{seller.name}}">{{seller.id}}</option>

                                            </select>
                                        </div>
                                        <div *ngIf="Leladd.controls['lelseller'].invalid && Leladd.controls['lelseller'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelseller'].errors?.required">
                                           Lelang Seller is required.
                                           </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="exampleFormControlSelect1">Cabang Penjual</label>
                                            <select class="form-control" name="lelbranch" #lelbranch formControlName="lelbranch">
                                                <option value="" selected disabled (ngModel)="branch_array">--SILAHKAN
                                                    PILIH--</option>
                                                <option *ngFor="let branch of branch_array" [ngValue]="branch"
                                                    label="{{branch.name}}" style="text-transform: uppercase;">{{branch.id}}</option>
                                            </select>
                                        </div>
                                        <div *ngIf="Leladd.controls['lelbranch'].invalid && Leladd.controls['lelbranch'].touched" class="alert alert-danger">
                                            <div *ngIf="Leladd.controls['lelbranch'].errors?.required">
                                           Lelang Branch is required.
                                           </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Lampiran</label>
                                    <input class="form-control" accept="application/pdf" type="file" formControlName="lelattachment"  (change)="onAttachmentChange($event)">
                                </div>
                                <div *ngIf="Leladd.controls['lelattachment'].invalid && Leladd.controls['lelattachment'].touched" class="alert alert-danger">
                                    <div *ngIf="Leladd.controls['lelattachment'].errors?.required">
                                   Lelang Attachment is required.
                                   </div>
                                </div>

                                <div class="form-group">
                                    <label for="file">Gambar (Max 1 MB/Gambar)</label>
                                    <input
                                        formControlName="imginp"
                                        id="file"
                                        type="file"
                                        class="form-control"
                                        multiple=""
                                        accept="image/*"
                                        (change)="onFileChange($event)">
                                    <div *ngIf="Leladd.controls['imginp'].touched && Leladd.controls['imginp'].invalid" class="alert alert-danger">
                                        <div *ngIf="Leladd.controls['imginp'].errors?.required">At least one File is required.</div>
                                        <div >File must be maximum of 5</div>
                                    </div>
                                </div>

                                <img *ngFor='let url of images'  [src]="url" height="150" width="200px" style="margin: 3px;"> <br/>



                                <button type="submit" class="btn btn-primary btn-sm w-100 mt-3"
                                    >Simpan</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

